<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HoopMatch | Basketball Matchmaking</title>
<style>
body { font-family: Arial; background:#0f172a; color:#e5e7eb; display:flex; justify-content:center; align-items:center; height:100vh; }
.box { background:#020617; padding:25px; border-radius:12px; width:350px; }
h2 { text-align:center; color:#38bdf8; }
label { display:block; margin-top:15px; }
select, input { width:100%; padding:10px; margin-top:5px; border-radius:8px; border:none; }
button { width:100%; padding:10px; border:none; border-radius:8px; margin-top:10px; font-weight:bold; cursor:pointer; }
.proceed { background:#38bdf8; }
.find { background:#22c55e; }
</style>
<nav style="position:absolute; top:20px; right:20px;">
    <a href="admin.html">
      <button class="click" style="padding:10px 20px; border-radius:8px; background:#38bdf8; color:#fff; border:none; cursor:pointer;">
        Admin
      </button>
    </a>
  </nav>
  
</head>
<body>
<div class="box">
  <h2>üèÄ HoopMatch</h2>

  <label>Player Name</label>
  <input type="text" id="playerName" placeholder="Enter your name">

  <label>Game Type</label>
  <select id="gameType">
    <option value="1v1">1v1</option>
    <option value="2v2">2v2</option>
    <option value="3v3">3v3</option>
    <option value="4v4">4v4</option>
    <option value="5v5">5v5</option>
  </select>

  <label>Barangay</label>
  <select id="barangay">
    <option>Alae</option>
    <option>Dahilayan</option>
    <option>Dalirig</option>
    <option>Damilag</option>
    <option>Diclum</option>
    <option>Guilang-guilang</option>
    <option>Kalugmanan</option>
    <option>Lindaban</option>
    <option>Lingion</option>
    <option>Maluko</option>
    <option>San Miguel</option>
    <option>Santiago</option>
  </select>

  <label>Time Slot</label>
  <select id="playTime">
    <option>4:00 AM ‚Äì 5:30 AM</option>
    <option>5:30 AM ‚Äì 7:00 AM</option>
    <option>7:00 AM ‚Äì 8:30 AM</option>
    <option>8:30 AM ‚Äì 10:00 AM</option>
    <option>1:00 PM ‚Äì 2:30 PM</option>
    <option>4:00 PM ‚Äì 5:30 PM</option>
    <option>5:30 PM ‚Äì 7:00 PM</option>
    <option>7:00 PM ‚Äì 8:30 PM</option>
    <option>8:30 PM ‚Äì 10:00 PM</option>
  </select>

  <button class="proceed" onclick="proceed()">Proceed</button>
  <button class="find" onclick="submitMatch()">Find Match</button>
</div>

<script>
function proceed() {
  alert("Please review your selections, then click Find Match.");
}

// Maximum players mapping per game type
const maxPlayers = {
  "1v1": 2,
  "2v2": 2,
  "3v3": 2,
  "4v4": 2,
  "5v5": 2
};

function submitMatch() {
  const playerName = document.getElementById("playerName").value.trim();


  const gameType = document.getElementById("gameType").value;
  const barangay = document.getElementById("barangay").value;
  const time = document.getElementById("playTime").value;

  // Get allMatches array or create new
  let allMatches = JSON.parse(localStorage.getItem("allMatches")) || [];

  // Check if match already exists with same gameType, barangay, and time
  let existingMatch = allMatches.find(m =>
    m.gameType === gameType &&
    m.barangay === barangay &&
    m.time === time &&
    m.status !== "Completed"
  );

  if (existingMatch) {
    // Add player to existing match
    if (!existingMatch.players.includes(playerName)) {
      existingMatch.players.push(playerName);
    }
    // Update status automatically
    existingMatch.status = existingMatch.players.length >= maxPlayers[gameType] ? "Full" : "Open";
  } else {
    // Create new match
    allMatches.push({
      gameType,
      barangay,
      time,
      players: [playerName],
      status: "Open",
      rating: "",
      feedback: ""
    });
  }

  localStorage.setItem("allMatches", JSON.stringify(allMatches));

  // Redirect to match view
  window.location.href = "match-data.html";
}
</script>
</body>
</html>
